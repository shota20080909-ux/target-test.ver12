<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>教師用ページ - 単語テスト管理</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>教師用ページ</h1>
    <div class="container">
        <h2>単元を追加</h2>
        <input type="text" id="unitName" placeholder="単元名を入力 (例: Lesson1)">
        <textarea id="vocabList" placeholder="日本語:英語 を改行で入力
(例)
犬:dog
猫:cat"></textarea>
        <button id="addUnitBtn">単元を追加</button>

        <h2>登録済みの単元</h2>
        <ul id="unitList"></ul>

        <h2>生徒用ページリンク</h2>
        <p>
            生徒はこちらのページへ → 
            <a href="student.html" target="_blank">student.html</a>
        </p>
    </div>

    <script>
        const unitNameInput = document.getElementById("unitName");
        const vocabListInput = document.getElementById("vocabList");
        const addUnitBtn = document.getElementById("addUnitBtn");
        const unitList = document.getElementById("unitList");

        // 既存単元を読み込み
        let units = JSON.parse(localStorage.getItem("units")) || {};

        function displayUnits() {
            unitList.innerHTML = "";
            for (const [unit, list] of Object.entries(units)) {
                const li = document.createElement("li");
                li.textContent = `${unit} (${list.length}語)`;
                const delBtn = document.createElement("button");
                delBtn.textContent = "削除";
                delBtn.onclick = () => {
                    delete units[unit];
                    localStorage.setItem("units", JSON.stringify(units));
                    displayUnits();
                };
                li.appendChild(delBtn);
                unitList.appendChild(li);
            }
        }

        addUnitBtn.onclick = () => {
            const name = unitNameInput.value.trim();
            const vocabText = vocabListInput.value.trim();
            if (!name || !vocabText) {
                alert("単元名と単語リストを入力してください。");
                return;
            }
            const vocabArray = vocabText.split("\n").map(line => {
                const [jp, en] = line.split(":");
                return { jp: jp.trim(), en: en.trim() };
            });
            units[name] = vocabArray;
            localStorage.setItem("units", JSON.stringify(units));
            unitNameInput.value = "";
            vocabListInput.value = "";
            displayUnits();
        };

        displayUnits();
    </script>
</body>
</html>